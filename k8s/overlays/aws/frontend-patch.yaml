# Strategic merge patch â€” applied on top of k8s/frontend.yaml for the AWS overlay.
# Changes:
#   - Removes imagePullPolicy: Never (images come from ECR, not local daemon)
#   - Sets API_URL to the real public ALB hostname.
#
# NOTE: The CD workflow replaces __API_URL_PLACEHOLDER__ with the actual
#       LoadBalancer hostname retrieved from `kubectl get svc api` before
#       applying this patch (pass 2 of two-pass deploy).
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend
spec:
  template:
    spec:
      containers:
        - name: frontend
          imagePullPolicy: IfNotPresent
          env:
            - name: API_URL
              value: "__API_URL_PLACEHOLDER__"
